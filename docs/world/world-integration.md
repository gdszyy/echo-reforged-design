# 世界变迁系统与核心玩法深度整合方案

> **文档版本**: 1.0
> **最后更新**: 2025-01-06

## 1. 概述

本篇文档旨在将 `world-morphing-simulator` 的具体模拟机制，与我们已设计的《Echo Reforged》核心玩法（战斗、Build系统）进行深度整合。目标是让世界不再是一个静态的背景板，而是成为一个与玩家动态交互、共同演化的生命体。每一个模拟层级的参数都将直接映射为具体的游戏体验。

---

## 2. 地幔层 (Mantle Layer) 整合

地幔层是世界的基石，其核心参数 `mantleEnergy` 将直接影响战斗的“温度”环境。

| 模拟器机制 | 整合到《Echo Reforged》的玩法 | 设计目的 |
| :--- | :--- | :--- |
| **地幔能量 (`mantleEnergy`)** | 决定了战斗地块的**基础温度**。高能量地块（如火山）的战斗，敌人初始温度偏高；低能量地块（如深渊）则偏低。 | 为玩家的冰/火 Build 创造有利或不利的战场环境，鼓励玩家根据世界温度分布来规划探索路线。 |
| **地形演变 (`expansion`/`shrink`)** | 1. **动态路径**：世界的扩张和收缩会动态地改变地图路径，可能连接新的区域或切断旧的路线。<br>2. **据点危机**：地形塌陷可能直接摧毁玩家的友好聚落或敌人的巢穴，成为重要的世界事件。 | 增加世界探索的不可预测性和紧迫感，让玩家感受到脚下的大地是“活”的。 |

---

## 3. 气候层 (Climate Layer) 整合

气候层为战斗引入了动态的环境变量，使每一场战斗都独一无二。

| 模拟器机制 | 整合到《Echo Reforged》的玩法 | 设计目的 |
| :--- | :--- | :--- |
| **地表温度 (`temperature`)** | 作为战斗中“温度系统”的初始值和环境基准值。敌人的温度会随回合自然地向当前地块的 `temperature` 靠拢。 | 强化了“环境”在战斗中的存在感，玩家不仅要对抗敌人，还要利用或克服环境温度。 |
| **风 (`advectionRate`)** | 在特定地块的战斗中，引入“强风”战场修正：<br> - 轻微地改变弹珠的初始发射轨迹。<br> - 影响部分飞行道具（如“飞剑”）的路径。 | 增加战斗的变数和操作技巧，让玩家感受到环境的物理影响。 |
| **雷暴 (`thunderstorm`)** | 在雷暴地块的战斗中，引入“雷暴”战场修正：<br> - 所有单位（敌我）对电属性伤害的易伤性增加。<br> - 玩家的电属性攻击获得加成。<br> - 每隔几回合，会有一道闪电随机劈中一个单位，造成伤害和温度上升。 | 创造高风险高回报的战斗场景，为电属性 Build 提供爆发机会。 |

---

## 4. 晶石层 (Crystal Layer) 整合

晶石层是连接资源循环、风险管理和玩家行为后果的核心。

| 模拟器机制 | 整合到《Echo Reforged》的玩法 | 设计目的 |
| :--- | :--- | :--- |
| **β晶石 (`Beta Crystal`)** | 与我们已设计的机制完全吻合：<br> - 作为战斗场景中的可破坏矿物出现。<br> - 掉落通用货币和用于制作**钉子**的**精华晶石**。 | 构成“战斗-获取资源-强化Build”的核心循环。 |
| **α晶石 (`Alpha Crystal`)** | 1. **辐射危害**：在有α晶石的地块战斗，会引入“辐射”战场修正，每回合对玩家发射器的**钉子**造成微量腐蚀伤害（类似持续掉血）。<br>2. **免疫机制**：玩家可以通过特定**符文词组**或提升友好聚落的**繁荣度**（模拟 `radiationImmunityThreshold`）来获得辐射抗性。 | 创造一个高风险区域，玩家需要在“高价值资源”和“高环境伤害”之间做出权衡。 |
| **晶石演替** | 玩家大量开采β晶石，导致地块上α晶石爆发的机制，将直接导致该区域的战斗难度飙升（辐射伤害加剧），完美实现了“玩家行为改变世界并反作用于自身”的设计闭环。 | 让玩家的每一个开采决策都带有长远的战略考量。 |

---

## 5. 生物层 (Bio Layer) 整合

生物层将“敌人”和“盟友”从简单的战斗单位，变为了动态演化的世界族群。

| 模拟器机制 | 整合到《Echo Reforged》的玩法 | 设计目的 |
| :--- | :--- | :--- |
| **聚落 (`Settlement`)** | - **友好聚落**：其**繁荣度 (`prosperity`)** 决定了商店中可购买的**发射器插件**和**消耗品**的等级和稀有度。<br>- **敌人巢穴**：其**物种属性 (`bioAttributes`)** 决定了该地块敌人的种类、技能和温度抗性。 | 将据点经营和敌人配置与世界演化深度绑定，使世界变得生动和可信。 |
| **扩张与迁徙 (`Expansion`/`Migration`)** | - **敌军扩张**：一个强大的敌人巢穴会向外扩张，改变邻近地块的敌人种类，形成动态的“势力范围”。<br>- **难民事件**：一个被摧毁的友好聚落可能会产生“迁徙者”，玩家可以在地图上遇到他们并触发护送或援助任务。 | 创造动态的地图势力变化和突发的叙事事件，增强探索的代入感。 |
| **进化 (`Evolution`)** | 敌人的巢穴会随着时间发生**基因突变 (`mutationRate`)**，产生新品种的敌人（例如，原本怕火的敌人进化出了更高的火抗性）。游戏后期，玩家会遇到“身经百战”的变异精英。 | 保证游戏后期的挑战性和新鲜感，让玩家感受到敌人也在“成长”和“适应”玩家的Build。 |

---

通过以上整合，`world-morphing-simulator` 不再是一个独立的概念，而是成为了《Echo Reforged》跳动的心脏，驱动着整个游戏世界的生态演替和玩法循环。
