# 世界与战斗联动机制

> **文档版本**: 0.1 (草案)
> **最后更新**: 2025-01-06

## 概述

本篇文档详细阐述“世界即战场”的设计理念。游戏中的世界状态（地块属性、聚落兴衰、晶石分布）将直接且动态地影响每一场战斗的场景构成、敌人配置和可用资源，从而将探索与战斗两大核心循环紧密地联系在一起。

---

## 一、地块属性对战斗场景的影响

每一场战斗都发生在世界地图的某个特定地块上，该地块的属性是生成战斗场景的“种子”。

| 地块属性 | 对应的战斗场景特性 | 示例 |
| :--- | :--- | :--- |
| **地形 (Terrain)** | 决定了战场的基础布局和障碍物。 | **森林地块**: 战场中会出现坚固的树木作为障碍物，但也会有可以被摧毁的灌木丛。 <br> **山地地块**: 战场地形崎岖不平，存在无法通行的山体，弹珠的弹射路线更复杂。 |
| **气候/环境 (Climate)** | 引入环境危害或特殊效果。 | **火山地块**: 战场中周期性出现岩浆喷口，对范围内的所有单位（包括敌我）造成火属性伤害。 <br> **冰川地块**: 战场大部分区域被冰面覆盖，弹珠和敌人的移动会发生打滑。 |
| **生态 (Ecology)** | 决定了主要的敌人类型和族群。 | **沼泽地块**: 主要敌人是毒属性的软泥怪和集群出没的蚊虫。 <br> **废弃都市**: 主要敌人是机械傀儡和变异体。 |
| **资源 (Resources)** | 决定了战场中可开采的资源种类。 | **富矿地块**: 战场中会出现大量的 **β 晶石矿**。 <br> **火元素富集区**: 战场中除了 β 晶石矿，还有小概率出现能直接掉落“火焰精华”的**稀有矿脉**。 |

---

## 二、世界变迁与动态遭遇

世界是动态演变的，这使得玩家的每一次探索都充满变数，战斗遭遇也因此变得独一无二。

### 2.1 聚落的兴衰与盟友

- **友好聚落**: 世界变迁系统会自然演化出人类聚落。当玩家在这些聚落附近的地块发生战斗时，可能会触发“友军增援”事件，聚落的守卫会作为友方单位出现在战场上，帮助玩家攻击敌人。
- **聚落被毁**: 如果一个聚落因为被怪物潮或环境灾难摧毁，那么其周围的地块会变得更加危险，出现更强大的精英敌人。玩家可能会接到“收复失地”或“为逝者复仇”的动态任务。

### 2.2 敌人的迁徙与进化

- **怪物潮**: 世界变迁会周期性地生成“怪物潮”，大量的同类型敌人会向特定方向迁徙。如果玩家在迁徙路线上触发战斗，将会面临远超常规数量的敌人，但战胜后的奖励也更丰厚。
- **环境适应**: 如果某个区域（例如，一片森林）长期被火属性怪物占据，该地块的环境属性可能会慢慢转变为“焦土”，原有的生物被驱逐，这又会进一步影响在此地发生的战斗。

---

## 三、玩家行为对世界与战斗的反作用

玩家的行为不仅影响世界，也会反过来改变自己未来的战斗体验。

### 3.1 开采晶石的后果

- **核心机制**: 如您所述，β 晶石会抑制 α 晶石的生长。当玩家在某个地块大量开采 β 晶石后，会为 α 晶石的爆发创造条件。
- **战斗联动**: 当一个地块的 α 晶石浓度爆发后，在该地块发生的战斗会变得极不稳定：
    - **敌人变异**: 战场上的普通敌人有概率被 α 晶石的能量辐射，当场变异为更强大的精英形态。
    - **空间扭曲**: 战场上会随机出现不稳定的空间裂隙，弹珠飞入后可能会被随机传送到另一个位置，增加了不可预测性。

### 3.2 剧情地块与特殊战斗

- **固定场地**: 世界地图上会存在少量拥有固定剧情的特殊地块（如“古代遗迹”、“巨龙之巢”）。
- **特殊战斗**: 在这些地块触发的战斗，其场景、敌人和胜利条件都是预设的，服务于剧情叙事。例如，在“古代炼金实验室”的战斗中，玩家的目标可能不是消灭所有敌人，而是保护一个核心装置不被破坏。

---

这份文档为战斗系统和世界系统之间搭建了桥梁。接下来，我们可以继续深入讨论您之前提到的**物理属性交互**（反弹、穿透、散射），或者您对这份联动文档有任何修改意见，我们也可以先进行完善。
