# 世界生成与战斗场景联动机制

> **文档版本**: 0.1 (草案)
> **最后更新**: 2026-01-06

## 一、核心理念：战斗是世界的延伸

在《Echo Reforged》中，战斗并非孤立的、与世隔绝的竞技场。恰恰相反，**战斗场景是世界大地图地块 (World Tile) 的直接体现和延伸**。玩家在哪个地块上遭遇敌人，战斗就会在具有该地块鲜明特征的环境中展开。这一设计旨在打破探索与战斗之间的壁垒，使玩家的每一步探索都与其战斗策略息息相关。

这个系统的核心循环是：

1.  **探索世界 (Exploration)**: 玩家在程序化生成的宏大世界中移动，发现不同地貌的**地块 (Tiles)**。
2.  **遭遇战斗 (Encounter)**: 在地块上移动会遭遇敌人，触发战斗。
3.  **环境交互 (Interaction)**: 战斗场景会继承地块的**环境特征**，包括可开采的资源、独特的障碍物、以及环境本身带来的增益或减益效果。
4.  **获取资源 (Acquisition)**: 玩家在战斗中利用子弹与环境交互（例如，击碎矿石），获取与该地块属性相关的**精华晶石 (Essence Crystals)**。
5.  **强化构筑 (Reinforcement)**: 玩家使用收集到的精华晶石制作新的钉子，强化自己的钉盘，从而更有效地探索和战斗。

## 二、地块类型与战斗场景设计

世界由多种不同的地块（或称为“生物群系 (Biomes)”）组成。每种地块都对应着独特的战斗场景设计。

| 地块类型 (Biome) | 核心资源 | 战斗场景特征 | 常见敌人类型 |
| :--- | :--- | :--- | :--- |
| **火山区 (Volcanic Zone)** | 🔥 火焰精华 | - **熔岩池**: 周期性喷发，对进入的敌人造成火焰伤害并大幅提升其温度。<br>- **黑曜石矿**: 可被击碎，掉落火焰精华和β晶石。极其坚硬。<br>- **热浪**: 场景中所有单位的温度会缓慢自然上升。 | 火元素生物、硬壳类敌人 |
| **冰川区 (Glacial Zone)** | ❄️ 冰霜精华 | - **冰锥**: 巨大的、悬挂的冰锥。击中后会掉落，对下方大范围内的所有单位造成伤害并施加冰冻效果。<br>- **滑冰面**: 场景地面部分区域为冰面，子弹和敌人在其上移动会产生滑动。<br>- **寒气**: 场景中所有单位的温度会缓慢自然下降。 | 冰元素生物、高机动性敌人 |
| **风暴山脉 (Stormy Peaks)** | 🌪️ 风暴精华 | - **上升气流**: 场景中存在数个向上的气流区域，进入的子弹会获得临时的速度和高度提升。<br>- **风眼石**: 击中后会产生一阵强风，将周围的敌人推开。<br>- **不稳定的锚点**: 场景中会预设几个风属性锚点，为玩家的风属性法阵提供便利。 | 飞行单位、远程攻击敌人 |
| **古代遗迹 (Ancient Ruins)** | ✨ 奥术精华 | - **符文石柱**: 无法被摧毁的障碍物，但上面刻有符文。子弹击中时会暂时激活，为子弹附加随机的低级属性。<br>- **能量裂隙**: 周期性开启，从中涌出少量低级敌人。<br>- **古代石板**: 极低概率在战斗场景的背景中出现，击中后可获得其拓片（用于符文解谜）。 | 构造体、能量生物 |
| **晶洞 (Crystal Cave)** | 💎 坚韧/锐利/弹射精华 | - **巨型晶簇**: 占据大量空间，可被多次击碎，每次击碎都会掉落大量β晶石和少量物理系精华。<br>- **共鸣水晶**: 场景中存在多种颜色的水晶。当子弹击中其中一种颜色的水晶时，所有同色的水晶都会发出共鸣，对周围小范围敌人造成伤害。 | 高防御敌人、分裂型敌人 |

## 三、资源循环的深化

通过将资源产出与特定的战斗场景深度绑定，我们鼓励玩家形成明确的探索目标。

- **“我需要构筑一套火焰Build”** -> **“我应该去火山区域探索和战斗”**
- **“我的子弹总是打不到后排的远程怪”** -> **“我需要去风暴山脉，利用上升气流和风眼石”**
- **“我的物理系Build缺少核心钉子”** -> **“我应该去晶洞，那里能产出我需要的精华”**

这种设计将玩家的长期构筑目标（我想玩什么流派）与短期战术决策（我如何利用当前环境）无缝连接起来，极大地提升了游戏的可玩性和策略深度。

## 四、开放问题与下一步

1.  **地块的稀有度**: 不同地块的出现概率如何分布？是否存在非常稀有但资源极其丰富的“传说之地”？
2.  **复合地块**: 是否存在两种地貌的交界地带，从而产生拥有两种环境特征的混合战斗场景？（例如，火山脚下的冰川融水区）
3.  **动态变化**: 世界地块是否会随游戏进程发生动态变化？例如，被玩家反复“开采”的火山，其火焰精华的产出率是否会下降？
4.  **敌人与环境的交互**: 除了玩家，敌人是否也能利用环境？例如，火元素敌人在熔岩池中是否会获得治疗或强化？
